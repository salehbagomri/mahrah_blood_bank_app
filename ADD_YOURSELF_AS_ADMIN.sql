-- ============================================
-- ุฅุถุงูุฉ ููุณู ูุฃุฏูู
-- ============================================

-- โ๏ธ ููู: ุงุณุชุจุฏู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุจุงูุจุฑูุฏ ุงูุฎุงุต ุจู!

-- ุงูุฎุทูุฉ 1: ุงุจุญุซ ุนู ูุนุฑูู (ID) ูู auth.users
SELECT 
    id,
    email,
    created_at
FROM auth.users
WHERE email = 'ุจุฑูุฏู@example.com'  -- โฌ๏ธ ุงุณุชุจุฏู ูุฐุง ุจุจุฑูุฏู!
LIMIT 1;

-- ============================================

-- ุงูุฎุทูุฉ 2: ุงูุณุฎ ุงูู ID ูู ุงููุชูุฌุฉ ุฃุนูุงู

-- ุงูุฎุทูุฉ 3: ุงุณุชุจุฏู ุงูููู ุงูุชุงููุฉ ููููุฐ:

INSERT INTO public.admins (id, name, email, is_active)
VALUES (
    'ูุนุฑู-ุงููุณุชุฎุฏู-ูู-ุงูุฎุทูุฉ-1',  -- โฌ๏ธ ุถุน ุงูู ID ููุง
    'ุงุณูู ุงููุงูู',                  -- โฌ๏ธ ุถุน ุงุณูู ููุง
    'ุจุฑูุฏู@example.com',            -- โฌ๏ธ ุถุน ุจุฑูุฏู ููุง
    true
)
ON CONFLICT (id) DO UPDATE
SET 
    name = EXCLUDED.name,
    email = EXCLUDED.email,
    is_active = EXCLUDED.is_active,
    updated_at = NOW();

-- ============================================

-- ุงูุฎุทูุฉ 4: ุชุญูู ูู ุฅุถุงูุชู

SELECT * FROM public.admins WHERE email = 'ุจุฑูุฏู@example.com';

-- ============================================
-- ููุงุญุธุฉ
-- ============================================

-- โ ON CONFLICT ูุนูู:
--    - ุฅุฐุง ููุช ููุฌูุฏุงู: ุณููุญุฏูุซ ุจูุงูุงุชู
--    - ุฅุฐุง ูู ุชูู ููุฌูุฏุงู: ุณููุถููู

-- ๐ฏ ุจุนุฏ ุงูุชูููุฐ:
--    1. ุงุฑุฌุน ููุชุทุจูู
--    2. ุณุฌู ุฎุฑูุฌ ุซู ุฏุฎูู
--    3. ุฌุฑุจ ุฅุถุงูุฉ ูุณุชุดูู
--    4. ูุฌุจ ุฃู ูุนูู!

-- ============================================

