# ุฏููู ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุจูุงูุงุช Supabase

## ๐ ุงูุฎุทูุงุช ุงูุฃุณุงุณูุฉ

### 1. ุฅูุดุงุก ูุดุฑูุน Supabase

1. ุงูุชูู ุฅูู [Supabase Dashboard](https://app.supabase.com/)
2. ูู ุจุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏ ุฃู ุชุณุฌูู ุงูุฏุฎูู
3. ุงุถุบุท ุนูู "New Project"
4. ุงููุฃ ุงููุนูููุงุช ุงูุชุงููุฉ:
   - **Name**: mahrah-blood-bank
   - **Database Password**: ุงุฎุชุฑ ูููุฉ ูุฑูุฑ ูููุฉ ูุงุญูุธูุง
   - **Region**: ุงุฎุชุฑ ุฃูุฑุจ ููุทูุฉ ุฌุบุฑุงููุฉ (ูุซู Europe West)
5. ุงุถุบุท ุนูู "Create new project"
6. ุงูุชุธุฑ ุญุชู ูุชู ุฅูุดุงุก ุงููุดุฑูุน (ูุฏ ูุณุชุบุฑู ุฏูููุฉ ุฃู ุฏูููุชูู)

### 2. ุชูููุฐ Schema ูุงุนุฏุฉ ุงูุจูุงูุงุช

1. ูู ููุญุฉ ุชุญูู Supabaseุ ุงูุชูู ุฅูู **SQL Editor**
2. ุงุถุบุท ุนูู **New Query**
3. ุงูุณุฎ ูุญุชูู ููู `supabase_schema.sql` ุจุงููุงูู
4. ุงูุตู ุงููุญุชูู ูู ูุญุฑุฑ SQL
5. ุงุถุบุท ุนูู **Run** ุฃู ุงุถุบุท `Ctrl+Enter`
6. ุชุฃูุฏ ูู ุธููุฑ ุฑุณุงูุฉ "Success" ุจุงูููู ุงูุฃุฎุถุฑ

### 3. ุงูุญุตูู ุนูู ููุงุชูุญ API

1. ูู ููุญุฉ ุชุญูู Supabaseุ ุงูุชูู ุฅูู **Settings** > **API**
2. ุณุชุฌุฏ ุงูููุงุชูุญ ุงูุชุงููุฉ:
   - **Project URL**: ุนููุงู API ุงูุฎุงุต ุจูุดุฑูุนู
   - **anon/public key**: ุงูููุชุงุญ ุงูุนุงู ูููุตูู ูู ุงูุชุทุจูู
   - **service_role key**: ุงูููุชุงุญ ุงูุณุฑู (ูุง ุชุดุงุฑูู ุฃุจุฏุงู)

3. ุงุญูุธ ูุฐู ุงูููุงุชูุญ ูู ููุงู ุขูู

### 4. ุฅุนุฏุงุฏ Authentication

1. ุงูุชูู ุฅูู **Authentication** > **Providers**
2. ุชุฃูุฏ ูู ุชูุนูู **Email** provider
3. ูู **Email Templates**ุ ููููู ุชุฎุตูุต ุฑุณุงุฆู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู

### 5. ุฅูุดุงุก ุฃูู Admin

ูุฅูุดุงุก ุฃูู ุญุณุงุจ ุฃุฏููุ ุงุชุจุน ุงูุฎุทูุงุช ุงูุชุงููุฉ:

1. ุงูุชูู ุฅูู **Authentication** > **Users**
2. ุงุถุบุท ุนูู **Add user** > **Create new user**
3. ุงููุฃ:
   - **Email**: admin@mahrah-blood-bank.com (ุฃู ุฃู ุจุฑูุฏ ุขุฎุฑ)
   - **Password**: ูููุฉ ูุฑูุฑ ูููุฉ
   - **Auto Confirm User**: ูุนูู ูุฐุง ุงูุฎูุงุฑ
4. ุงุถุบุท ุนูู **Create user**
5. ุงูุณุฎ ุงูู **User UID** ูู ูุงุฆูุฉ ุงููุณุชุฎุฏููู

6. ุงูุชูู ุฅูู **SQL Editor** ูููุฐ ุงูุงุณุชุนูุงู ุงูุชุงูู:

```sql
-- ุงุณุชุจุฏู USER_UID_HERE ุจุงูู UID ุงูุฐู ูุณุฎุชู
INSERT INTO admins (id, name, email, is_active)
VALUES (
    'USER_UID_HERE',
    'ุงููุฏูุฑ ุงูุนุงู',
    'admin@mahrah-blood-bank.com',
    TRUE
);
```

### 6. ุฅุนุฏุงุฏ ุงูุชุทุจูู

1. ูู ูุดุฑูุน Flutterุ ุฃูุดุฆ ููู `.env` ุฃู ููู configuration:

```dart
// lib/config/supabase_config.dart
class SupabaseConfig {
  static const String supabaseUrl = 'YOUR_SUPABASE_URL';
  static const String supabaseAnonKey = 'YOUR_SUPABASE_ANON_KEY';
}
```

2. ุงุณุชุจุฏู `YOUR_SUPABASE_URL` ู `YOUR_SUPABASE_ANON_KEY` ุจุงูููู ุงููุนููุฉ

## ๐ ุฅุนุฏุงุฏุงุช ุงูุฃูุงู

### ุชูุนูู Row Level Security (RLS)

ุชู ุชูุนูู RLS ุชููุงุฆูุงู ูู Schema. ุชุฃูุฏ ูู ุฃู:

1. ุฌููุน ุงูุฌุฏุงูู ูุฏููุง RLS ููุนู
2. ุงูุณูุงุณุงุช (Policies) ุชู ุฅูุดุงุคูุง ุจุดูู ุตุญูุญ
3. ููููู ูุฑุงุฌุนุฉ ุงูุณูุงุณุงุช ูู **Authentication** > **Policies**

### ุฅุนุฏุงุฏุงุช CORS

ุฅุฐุง ููุช ุชุณุชุฎุฏู ุงูุชุทุจูู ุนูู ุงูููุจ:

1. ุงูุชูู ุฅูู **Settings** > **API**
2. ูู ูุณู **CORS**, ุฃุถู ุงููุทุงูุงุช ุงููุณููุญ ุจูุง

## ๐ ุงุฎุชุจุงุฑ ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุงุฎุชุจุงุฑ ุฅุถุงูุฉ ูุชุจุฑุน

```sql
INSERT INTO donors (name, phone_number, blood_type, district, age, gender)
VALUES ('ุงุฎุชุจุงุฑ ุงุณู', '777000000', 'A+', 'ุงูุบูุถุฉ', 25, 'male');
```

### ุงุฎุชุจุงุฑ ุงูุจุญุซ

```sql
SELECT * FROM search_donors('A+', 'ุงูุบูุถุฉ', TRUE);
```

### ุงุฎุชุจุงุฑ ุงูุฅุญุตุงุฆูุงุช

```sql
SELECT get_statistics();
```

## ๐๏ธ ุงูุตูุงูุฉ

### Backup ูุงุนุฏุฉ ุงูุจูุงูุงุช

1. ุงูุชูู ุฅูู **Settings** > **Database**
2. ูู ูุณู **Backups**, ููููู:
   - ุชุญููู backup ูุฏูู
   - ุฌุฏููุฉ backups ุชููุงุฆูุฉ (ูู ุงูุฎุทุท ุงููุฏููุนุฉ)

### ูุฑุงูุจุฉ ุงูุฃุฏุงุก

1. ุงูุชูู ุฅูู **Database** > **Query Performance**
2. ุฑุงุฌุน ุงูุงุณุชุนูุงูุงุช ุงูุจุทูุฆุฉ
3. ุฃุถู indexes ุฅุถุงููุฉ ุฅุฐุง ูุฒู ุงูุฃูุฑ

## ๐ ููุงุญุธุงุช ูููุฉ

1. **ูุง ุชุดุงุฑู ููุชุงุญ service_role ุฃุจุฏุงู** - ูุฐุง ุงูููุชุงุญ ูููุญ ูุตููุงู ูุงููุงู ููุงุนุฏุฉ ุงูุจูุงูุงุช

2. **ุงุณุชุฎุฏู anon key ูู ุงูุชุทุจูู** - ูุฐุง ุงูููุชุงุญ ุขูู ููุงุณุชุฎุฏุงู ุงูุนุงู ููุชู ุญูุงูุชู ุจูุงุณุทุฉ RLS

3. **ุงุญูุธ ูุณุฎุฉ ุงุญุชูุงุทูุฉ** - ูู ุจุนูู backup ุฏูุฑู ููุงุนุฏุฉ ุงูุจูุงูุงุช

4. **ุฑุงูุจ ุงูุงุณุชุฎุฏุงู** - Supabase ูุฏูู ุญุฏูุฏ ููุฎุทุฉ ุงููุฌุงููุฉ:
   - 500 MB database storage
   - 2 GB file storage
   - 50,000 monthly active users
   - 2 GB egress bandwidth

5. **ุชุญุฏูุซ ุงูุณูุงุณุงุช** - ููููู ุชุนุฏูู ุณูุงุณุงุช RLS ุญุณุจ ุงุญุชูุงุฌุงุช ุงููุดุฑูุน

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุฎุทุฃ: "new row violates row-level security policy"

- ุชุฃูุฏ ูู ุฃู ุงููุณุชุฎุฏู ูุฏูู ุงูุตูุงุญูุงุช ุงูููุงุณุจุฉ
- ุฑุงุฌุน ุณูุงุณุงุช RLS ููุฌุฏูู ุงููุนูู

### ุฎุทุฃ: "permission denied for table"

- ุชุฃูุฏ ูู ุฃู RLS ููุนู ูููุงู policy ุชุณูุญ ุจุงูุนูููุฉ ุงููุทููุจุฉ

### ุฎุทุฃ: "JWT expired"

- ุงููุณุชุฎุฏู ุจุญุงุฌุฉ ูุชุณุฌูู ุงูุฏุฎูู ูุฑุฉ ุฃุฎุฑู
- ุชุญูู ูู ุฅุนุฏุงุฏุงุช JWT ูู Supabase

## ๐ ุงูุฏุนู

- [ูุซุงุฆู Supabase](https://supabase.com/docs)
- [Discord Community](https://discord.supabase.com/)
- [GitHub Discussions](https://github.com/supabase/supabase/discussions)

